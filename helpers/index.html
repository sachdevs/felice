<html>

<head>
    <title>fe</title>
</head>

<body>
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="bower_components/async/lib/async.js"></script>
    <script type="text/javascript">
    var baseGenreArr = ["abstract",
        "abstractro",
        "accordion",
        "acousmatic",
        "afrikaans",
        "afrobeat",
        "afrobeats",
        "aggrotech",
        "ambeat",
        "ambient",
        "andean",
        "anime",
        "arabesk",
        "aussietronica",
        "austindie",
        "austropop",
        "axe",
        "azonto",
        "bachata",
        "balearic",
        "banda",
        "bangla",
        "barbershop",
        "barnemusikk",
        "baroque",
        "bassline",
        "beatdown",
        "bebop",
        "belorush",
        "bemani",
        "benga",
        "bhangra",
        "blackgaze",
        "blaskapelle",
        "bluegrass",
        "blues",
        "bmore",
        "bolero",
        "boogaloo",
        "bounce",
        "breakbeat",
        "breakcore",
        "breaks",
        "brega",
        "britpop",
        "broadway",
        "brostep",
        "byzantine",
        "c64",
        "c86",
        "cabaret",
        "cajun",
        "calypso",
        "cantautor",
        "cantopop",
        "capoeira",
        "carnatic",
        "catstep",
        "ccm",
        "ceilidh",
        "cello",
        "celtic",
        "chalga",
        "chanson",
        "chillstep",
        "chillwave",
        "chiptune",
        "choral",
        "choro",
        "christmas",
        "clarinet",
        "classical",
        "comedy",
        "comic",
        "commons",
        "complextro",
        "consort",
        "corrosion",
        "country",
        "coverchill",
        "covertrance",
        "cowpunk",
        "crunk",
        "cubaton",
        "cumbia",
        "dancehall",
        "dangdut",
        "dansband",
        "danseband",
        "darkstep",
        "deathgrind",
        "demoscene",
        "desi",
        "didgeridoo",
        "disco",
        "discofox",
        "dixieland",
        "djent",
        "doomcore",
        "doujin",
        "downtempo",
        "drama",
        "dreamo",
        "drone",
        "drumfunk",
        "dub",
        "dubstep",
        "dubsteppe",
        "duranguense",
        "e6fi",
        "ebm",
        "ectofolk",
        "ecuadoria",
        "edm",
        "electro",
        "electroclash",
        "electrofox",
        "electronic",
        "electronica",
        "electronicore",
        "electropowerpop",
        "electropunk",
        "emo",
        "enka",
        "entehno",
        "environmental",
        "epicore",
        "etherpop",
        "eurobeat",
        "eurodance",
        "europop",
        "euroska",
        "eurovision",
        "exotica",
        "experimental",
        "fado",
        "fake",
        "filmi",
        "filthstep",
        "fingerstyle",
        "flamenco",
        "folk",
        "folkmusik",
        "footwork",
        "forro",
        "freakbeat",
        "freestyle",
        "funk",
        "futurepop",
        "gabba",
        "galego",
        "gamecore",
        "gamelan",
        "gbvfi",
        "ghettotech",
        "ghoststep",
        "glitch",
        "goregrind",
        "gospel",
        "grime",
        "grindcore",
        "grunge",
        "grupera",
        "guidance",
        "hardcore",
        "hardstyle",
        "harp",
        "hatecore",
        "hauntology",
        "hawaiian",
        "healing",
        "highlife",
        "hiplife",
        "hoerspiel",
        "hollywood",
        "horrorcore",
        "house",
        "hurban",
        "hyphy",
        "idol",
        "illbient",
        "indietronica",
        "indorock",
        "industrial",
        "iskelma",
        "japanoise",
        "jazz",
        "jerk",
        "judaica",
        "juggalo",
        "jumpstyle",
        "jungle",
        "kabarett",
        "karneval",
        "kindermusik",
        "kirtan",
        "kizomba",
        "klapa",
        "klezmer",
        "kompa",
        "kuduro",
        "kwaito",
        "laboratorio",
        "laiko",
        "latin",
        "lds",
        "levenslied",
        "liedermacher",
        "lilith",
        "lithumania",
        "liturgical",
        "lounge",
        "lowercase",
        "madchester",
        "maghreb",
        "magyar",
        "makossa",
        "mallet",
        "mambo",
        "mandopop",
        "manele",
        "mariachi",
        "mashup",
        "mathcore",
        "mbalax",
        "medieval",
        "meditation",
        "melancholia",
        "merengue",
        "merseybeat",
        "metal",
        "metalcore",
        "metropopolis",
        "microhouse",
        "minimal",
        "mizrahi",
        "monastic",
        "moombahton",
        "morna",
        "motivation",
        "motown",
        "mpb",
        "nasheed",
        "necrogrind",
        "neoclassical",
        "neofolk",
        "nepali",
        "nerdcore",
        "neurofunk",
        "neurostep",
        "ninja",
        "nintendocore",
        "noise",
        "norteno",
        "nursery",
        "nwobhm",
        "nwothm",
        "oi",
        "opera",
        "opm",
        "oratory",
        "orchestral",
        "orgcore",
        "ostrock",
        "outsider",
        "pagode"
    ];
    var obj = {};
    var count = 0;

    async.whilst(
        function() {
            return count < baseGenreArr.length;
        },
        function(callback) {
            $.getJSON('http://developer.echonest.com/api/v4/genre/similar?api_key=JWARDUHE5GKDMWFDJ&format=jsonp&name=' + baseGenreArr[i] + '&callback=?', function(res) {
                var arr = res.response.genres;
                obj[baseGenreArr[i]] = arr;
                console.log(obj);
            });
            count++;
            setTimeout(callback, 1000);
        },
        function(err) {
            console.log(obj);
        }
    );

    for (var i = 0; i < baseGenreArr.length; i++) {
        (function(i, data) {
            setTimeout(function() {
                (function(datall, i) {})(data, i);
            }, 1000);
        }(i, obj));
    }
    </script>
</body>

</html>